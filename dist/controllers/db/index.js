"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.connection=exports.db=void 0;var _config=require("../../config"),_phillyHelpers=require("philly-helpers"),_mongoose=require("mongoose"),_mongoose2=_interopRequireDefault(_mongoose);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var autoIndex=!1;_config.debug&&(_mongoose2.default.set("debug",!0),autoIndex=!0),_mongoose2.default.Promise=global.Promise;var _db$connect=_mongoose2.default.connect(_config.database.url,{autoIndex:autoIndex}),connection=_db$connect.connection;connection.once("open",function(){_phillyHelpers.log.debug("Mongoose connection open.")}),connection.on("error",function(err){throw _phillyHelpers.log.info("Mongoose default connection error: "+err),new Error("Unable to connect to database!")}),connection.on("disconnected",function(){_phillyHelpers.log.debug("Mongoose default connection disconnected.")}),process.on("SIGINT",function(){connection.close(function(){_phillyHelpers.log.debug("Mongoose default connection disconnected through app termination."),process.exit(0)})}),exports.db=_mongoose2.default,exports.connection=connection,require("../../models/Detail"),require("../../models/Feed"),require("../../models/Stat"),require("../../models/Log"),require("../../models/Application"),require("../../models/Topic"),require("../../models/Endpoint"),require("../../models/Subscription"),require("../../models/Stat");